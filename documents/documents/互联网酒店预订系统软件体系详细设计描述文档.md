# 互联网酒店预订系统(HMS)软件体系详细设计描述文档

[toc]

## 更新记录

| 修改人员 | 修改日期 | 修改内容                     |
| -------- | -------- | ---------------------------- |
| 陆志晗   | 5.31     | 完成客户部分详细设计         |
| 高金比尔 | 5.31     | 完成酒店工作人员部分详细设计 |
| 李宇轩   | 5.31     | 完成网站管理人员部分详细设计 |
| 黄桂源   | 5.31     | 完成网站营销人员部分详细设计 |



## 1.引言

### 	1.1编制目的

​		本报告详细完成对酒店管理系统的详细设计，达到指导后序软件构造的目的，同时实现和测试人员及用户的沟通。

​		本报告面向开发人员、测试人员及最终用户而编写，是了解系统的导航。

### 	1.2词汇表

|  词汇名称  | 词汇含义                                   |
| :--------: | ------------------------------------------ |
|    HMS     | 互联网酒店预订系统                         |
|     bl     | 业务逻辑接口                               |
|   blImpl   | 业务逻辑接口的实现                         |
|    data    | 数据层接口                                 |
|  dataImpl  | 数据层接口的实现                           |
| controller | 负责处理REST API请求                       |
|     po     | 持久化对象，用于数据层和逻辑层之间数据传递 |
|     vo     | 值对象，用于逻辑层和展示层（前端）数据传递 |

### 		1.3参考资料

​		1、骆斌,丁二玉,刘钦. 软件工程与计算（卷二）：软件开发的技术基础[M]. 北京:机械工业出版社. 2012

​		2、58467小组用例文档、软件需求文档和体系结构文档



## 2.产品概述

​		参考酒店管理系统用例文档和酒店管理系统需求规格说明文档中对产品的概括描述。



## 3.体系结构设计描述

​		参考酒店管理系统概要设计文档中对体系结构设计的描述。



## 4.结构视角

### 	4.1业务逻辑层的分解

​		业务逻辑层的开发包图参见软件体系结构文档

#### 	4.1.1 Adminbl模块

​	（1）模块概述

​		Adminbl模块承担的需求参见需求规格说明文档功能需求及相关非功能需求。

​		Adminbl模块的职责及接口参见软件系统结构描述文档。

​	（2）整体结构

​		 根据体系结构的设计，我们将系统分为展示层，业务逻辑层，数据层。每一层之间为了增加灵活性，我们会添加接口。在展示层和业务逻辑层之间，我们添加AdminService接口。业务逻辑层和数据层之间添加AdminMapper接口。为了隔离业务逻辑职责和逻辑控制职责，我们增加了AdminController。AdminController会将对账户和酒店的管理委托给AdminService对象。User是用户信息的持久化对象，Hotel是酒店信息的持久化对象，Hotel_ManagerPO是保存酒店id，酒店名和酒店管理员id的持久化对象。

Adminbl的模块设计如图		

![](https://lililizi.oss-cn-beijing.aliyuncs.com/%E4%BF%AE%E6%94%B910.png)

​		adminbl模块各个类的职责如表所示

| 模块            | 职责                                 |
| --------------- | ------------------------------------ |
| AdminController | 负责实现网站管理员页面所需要的的服务 |
| AdminService    | 帮助完成网站管理员界面所需要的的服务 |

​	（3）模块内部类的接口规范

<center>表 AdminController模块的接口规范</center>
<table border="1">
<tr>
    <th colspan="3">提供的服务（供接口）</th>
</tr>
    <tr>
    <td rowspan="4">AdminController.addManager</td>
    <td>语法</td>
    <td>public ResponseVO addManager(UserForm userForm)</td>
</tr>
    <tr>
    <tr>
        <td>前置条件</td>
        <td>已创建adminservice对象，并且输入符合输入规则</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>调用adminservice的addManager方法</td>
    </tr>
    <tr>
    <td rowspan="4">AdminController.getAllManagers</td>
    <td>语法</td>
    <td>public ResponseVO getAllManagers()</td>
</tr>
    <tr>
    <tr>
        <td>前置条件</td>
        <td>已创建adminservice对象</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>调用adminservice的addManager方法</td>
    </tr>
    <tr>
    <td rowspan="4">AdminController.delAccount</td>
    <td>语法</td>
    <td>public ResponseVO delAccount(@RequestBody UserForm userForm)</td>
</tr>
    <tr>
    <tr>
        <td>前置条件</td>
        <td>已创建adminservice对象，并且输入符合输入规则</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>调用adminservice的delAccount方法</td>
    </tr>
    <tr>
    <td rowspan="4">AdminController.changeUser</td>
    <td>语法</td>
    <td>public ResponseVO changeUser(@RequestBody UserForm userForm)</td>
</tr>
    <tr>
    <tr>
        <td>前置条件</td>
        <td>已创建adminservice对象，并且输入符合输入规则</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>调用adminservice的changeUser方法</td>
    </tr>
    <tr>
    <td rowspan="4">AdminController.addHotelManager</td>
    <td>语法</td>
    <td>public ResponseVO addHotelManager(@RequestBody Hotel_Manager hotel_manager)</td>
</tr>
    <tr>
    <tr>
        <td>前置条件</td>
        <td>已创建adminservice对象，并且输入符合输入规则</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>调用adminservice的addHotelManager方法</td>
    </tr>
    <tr>
    <td rowspan="4">AdminController.searchHotel</td>
    <td>语法</td>
    <td>public ResponseVO searchHotel(@RequestBody Hotel_Manager hotel_manager)</td>
</tr>
    <tr>
    <tr>
        <td>前置条件</td>
        <td>已创建adminservice对象，并且输入符合输入规则</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>调用adminservice的searchHotel方法</td>
    </tr>
    <tr>
    <td rowspan="4">AdminController.changeHotelManager</td>
    <td>语法</td>
    <td>public ResponseVO changeHotelManager(@RequestBody HotelVO hotelVO)</td>
</tr>
    <tr>
    <tr>
        <td>前置条件</td>
        <td>已创建adminservice对象，并且输入符合输入规则</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>调用adminservice的changeHotelManager方法</td>
    </tr>
<th colspan="3">
    需要的服务（需接口）
</th>
 </tr>
    <tr>
        <td colspan="1">服务名</td>
        <td colspan="2">服务</td>
    </tr>
    <tr>
        <td colspan="1">AdminService.addManager(UserForm userform)</td>
        <td colspan="2">加入一个用户</td>
    </tr>
<tr>
        <td colspan="1">AdminService.getAllManagers()</td>
        <td colspan="2">返回所有用户信息</td>
    </tr>
<tr>
        <td colspan="1">AdminService.delAccount(UserForm userform)</td>
        <td colspan="2">删除一个用户信息</td>
    </tr>
<tr>
        <td colspan="1">AdminService.changUser(UserForm userform)</td>
        <td colspan="2">修改一个用户信息</td>
    </tr>
<tr>
        <td colspan="1">AdminService.addHotelManager(Hotel_Manager hotel_manager)</td>
        <td colspan="2">添加一个酒店信息</td>
    </tr>
<tr>
        <td colspan="1">AdminService.searchHotel(Hotel_Manager hotel_manager)</td>
        <td colspan="2">返回酒店列表</td>
    </tr>
<tr>
        <td colspan="1">AdminService.changeHotelManager(HotelVO hotelVO)</td>
        <td colspan="2">修改酒店绑定的酒店管理员</td>
    </tr>
</table>
<center>表 AdminService模块的接口规范</center>
<table border="1">
<tr>
    <th colspan="3">提供的服务（供接口）</th>
</tr>
    <tr>
    <td rowspan="4">AdminService.addManager</td>
    <td>语法</td>
    <td>public ResponseVO addManager(UserForm userForm)</td>
</tr>
    <tr>
    <tr>
        <td>前置条件</td>
        <td>使用者身份为网站管理员并开始添加</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>添加网站用户信息</td>
    </tr>
    <tr>
    <td rowspan="4">AdminService.getAllManagers</td>
    <td>语法</td>
    <td>public List&lt;User> get AllManagers()</td>
</tr>
    <tr>
    <tr>
        <td>前置条件</td>
        <td>使用者身份为网站管理员</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回所有用户的信息</td>
    </tr>
    <tr>
    <td rowspan="4">AdminService.delAccount</td>
    <td>语法</td>
    <td>public ResponseVO delAccount(UserForm userForm)</td>
</tr>
    <tr>
    <tr>
        <td>前置条件</td>
        <td>使用者身份为网站管理员，已存在用户信息</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>删除用户信息</td>
    </tr>
    <tr>
    <td rowspan="4">AdminService.changUser</td>
    <td>语法</td>
    <td>public ResponseVO changUser(UserForm userForm)</td>
</tr>
    <tr>
    <tr>
        <td>前置条件</td>
        <td>使用者身份为网站管理员，已存在用户信息</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>修改用户信息</td>
    </tr>
    <tr>
    <td rowspan="4">AdminService.addHotelManager</td>
    <td>语法</td>
    <td>pubic ResponseVO addHotelManager(Hotel_Manager hotel_manager)</td>
</tr>
    <tr>
    <tr>
        <td>前置条件</td>
        <td>使用者身份为网站管理员并开始添加</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>添加酒店并绑定酒店管理员</td>
    </tr>
    <tr>
    <td rowspan="4">AdminService.searchHotel</td>
    <td>语法</td>
    <td>public ResponseVO searchHotel(Hotel_Manager hotel_manager)</td>
</tr>
    <tr>
    <tr>
        <td>前置条件</td>
        <td>使用者身份为网站管理员</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回酒店列表</td>
    </tr>
    <tr>
    <td rowspan="4">AdminService.changeHotelManager</td>
    <td>语法</td>
    <td>public ResponseVO changeHotelManager(HotelVO hotelVO)</td>
</tr>
    <tr>
    <tr>
        <td>前置条件</td>
        <td>使用者身份为网站管理员</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>修改酒店管理员</td>
    </tr>
<th colspan="3">
    需要的服务（需接口）
</th>
 </tr>
    <tr>
        <td colspan="1">服务名</td>
        <td colspan="2">服务</td>
    </tr>
    <tr>
        <td colspan="1">User.setEmail(String email)</td>
        <td colspan="2">设置用户邮箱</td>
    </tr>
    <tr>
        <td colspan="1">User.setPassword(String password)</td>
        <td colspan="2">设置用户密码</td>
    </tr>
    <tr>
        <td colspan="1">User.setUserType(UserType userType)</td>
        <td colspan="2">设置用户类型</td>
    </tr>
	<tr>
        <td colspan="1">User.getEmail()</td>
        <td colspan="2">返回用户email</td>
    </tr>
	<tr>
        <td colspan="1">UserForm.getPhone()</td>
        <td colspan="2">返回用户电话号码</td>
    </tr>
	<tr>
        <td colspan="1">user.setPhoneNumber(String phone)</td>
        <td colspan="2">设置用户电话号码</td>
    </tr>
    <tr>
        <td colspan="1">ResponseVO.buildFailure(String message)</td>
        <td colspan="2">返回构建错误信息</td>
    </tr>
    <tr>
        <td colspan="1">ResponseVO.buildSuccess(Object content)</td>
        <td colspan="2">返回构建成功信息</td>
    </tr>
<tr>
    <td colspan="1">adminMapper.addManager(user)</td>
    <td colspan="2">将user信息加入数据库</td>
</tr>
<tr>
    <td colspan="1">adminMapper.delAccount(email)</td>
    <td colspan="2">删除用户信息</td>
</tr>
<tr>
    <td colspan="1">UserForm.getEmail()</td>
    <td colspan="2">返回用户email</td>
</tr>
<tr>
    <td colspan="1">hotel_manager.getEmail()</td>
    <td colspan="2">返回酒店管理员email</td>
</tr>
<tr>
    <td colspan="1">hotel_manager.getHotelname()</td>
    <td colspan="2">返回酒店名</td>
</tr>
<tr>
    <td colspan="1">adminMapper.judge_exist(String email)</td>
    <td colspan="2">通过email判断数据库中是否存在该账号</td>
</tr>
<tr>
    <td colspan="1">adminMapper.judgeHotelManager(String email)</td>
    <td colspan="2">返回该用户账户类型</td>
</tr>
<tr>
    <td colspan="1"> hotel.setHotelName(String name)</td>
    <td colspan="2">设置酒店名</td>
</tr>
<tr>
    <td colspan="1"> hotel.setManagerId(int id)</td>
    <td colspan="2">设置酒店管理员id</td>
</tr>
<tr>
    <td colspan="1"> adminMapper.addHotelManager(Hotel hotel)</td>
    <td colspan="2">向数据库中添加酒店以及该酒店管理员</td>
</tr>
<tr>
    <td colspan="1"> adminMapper.judge_existHotel(String name)</td>
    <td colspan="2">根据酒店名判断数据库中是否存在与该名字相同酒店名的酒店</td>
</tr>
<tr>
    <td colspan="1"> adminMapper.judge_existManager(int id )</td>
    <td colspan="2">根据id判断该管理员是否存在与于数据库中</td>
</tr>
<tr>
    <td colspan="1"> hotelVO.getManagerId()</td>
    <td colspan="2">返回酒店管理员id</td>
</tr>
<tr>
    <td colspan="1"> hotelVO.getId()</td>
    <td colspan="2">返回酒店id</td>
</tr>
<tr>
    <td colspan="1"> hotelVO.setManagerId()</td>
    <td colspan="2">设置酒店管理员id</td>
</tr>
<tr>
    <td colspan="1"> hotelVO.setId()</td>
    <td colspan="2">设置酒店id</td>
</tr>
<tr>
    <td colspan="1">adminMapper.judgeHotelManager_1(int id)</td>
    <td colspan="2">根据id返回该账户用户类型</td>
</tr>
<tr>
    <td colspan="1"> adminMapper.update_HotelManager(Hotel hotel)</td>
    <td colspan="2">更新数据库中酒店管理员id</td>
</tr>
</table>

（4）业务逻辑层的动态模型

添加用户的顺序图

![](https://lililizi.oss-cn-beijing.aliyuncs.com/11%20%281%29.png)

得到所有用户信息的顺序图

![](https://lililizi.oss-cn-beijing.aliyuncs.com/11%20%282%29.png)

删除用户的顺序图

![](https://lililizi.oss-cn-beijing.aliyuncs.com/11%20%283%29.png)

更改用户信息的顺序图

![](https://lililizi.oss-cn-beijing.aliyuncs.com/11%20%284%29.png)

添加酒店的顺序图

![](https://lililizi.oss-cn-beijing.aliyuncs.com/11%20%285%29.png)

搜索酒店的顺序图

![](https://lililizi.oss-cn-beijing.aliyuncs.com/11%20%286%29.png)

修改酒店管理员的顺序图

![](https://lililizi.oss-cn-beijing.aliyuncs.com/11%20%287%29.png)

（5）业务逻辑层的设计原理

利用委托式的风格，每个界面需要访问的业务逻辑由各自的控制器委托给不同领域的对象。



#### 4.1.2 Userbl模块

（1）模块概述

​		Userbl模块承担的需求参见需求规格说明文档功能需求及相关非功能需求。

​		Userbl模块的职责及接口参见软件系统结构描述文档。

​	（2）整体结构

​		 我们将系统分为展示层，业务逻辑层，数据层。每一层之间为了增加灵活性，我们会添加接口。在展示层和业务逻辑层之间，我们添加AccountService接口。业务逻辑层和数据层之间添加AccountMapper接口。为了隔离业务逻辑职责和逻辑控制职责，我们增加了AccountController。AccountController会将对账户和酒店的管理委托给AccountService对象。User是用户信息的持久化对象.

Userbl的模块设计如图		

![](https://lililizi.oss-cn-beijing.aliyuncs.com/1234.png)

adminbl模块各个类的职责如表所示

| 模块              | 职责                                                         |
| ----------------- | ------------------------------------------------------------ |
| AccountController | 负责实现用户页面所需要的的服务                               |
| AccountService    | 帮助完成用户界面所需要的的服务                               |
| User              | 系统用户的领域模型对象，拥有用户数据得姓名和密码，可以解决登陆问题 |

​	（3）模块内部类的接口规范

<center>表 AccountController模块的接口规范</center>
<table border="1">
<tr>
    <th colspan="3">提供的服务（供接口）</th>
</tr>
    <tr>
    <td rowspan="4">AccountController.login</td>
    <td>语法</td>
    <td>public ResponseVO login(@RequestBody UserForm userForm)</td>
</tr>
    <tr>
    <tr>
        <td>前置条件</td>
        <td>已创建AccountService对象，并且输入符合输入规则</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>调用accountservice的login方法</td>
    </tr>
    <tr>
    <td rowspan="4">AccountController.registerAccount</td>
    <td>语法</td>
    <td>public ResponseVO registerAccount(@RequestBody UserVO userVO)</td>
</tr>
    <tr>
    <tr>
        <td>前置条件</td>
        <td>已创建AccountService对象，并且输入符合输入规则</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>调用accountservice的registerAccount方法</td>
    </tr>
    <tr>
    <td rowspan="4">AccountController.getUserInfo</td>
    <td>语法</td>
    <td>public ResponseVO getUserInfo(@PathVariable int id)</td>
</tr>
    <tr>
    <tr>
        <td>前置条件</td>
        <td>已创建AccountService对象，并且输入符合输入规则</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>调用accountservice的getUserInfo方法</td>
    </tr>
    <tr>
    <td rowspan="4">AccountController.updateInfo</td>
    <td>语法</td>
    <td>public ResponseVO updateInfo(@RequestBody UserInfoVO userInfoVO,@PathVariable int id)</td>
</tr>
    <tr>
    <tr>
        <td>前置条件</td>
        <td>已创建AccountService对象，并且输入符合输入规则</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>调用accountservice的updateUserInfo方法</td>
    </tr>
    <tr>
    <td rowspan="4">AccountController.changeCredit</td>
    <td>语法</td>
    <td>public ResponseVO changeCredit(int id,double chargeMoney)</td>
</tr>
    <tr>
    <tr>
        <td>前置条件</td>
        <td>已创建AccountService对象，并且输入符合输入规则</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>调用accountservice的changeCredit方法</td>
    </tr>
<th colspan="3">
    需要的服务（需接口）
</th>
 </tr>
    <tr>
        <td colspan="1">服务名</td>
        <td colspan="2">服务</td>
    </tr>
    <tr>
        <td colspan="1">AccountService.login(UserForm userform)</td>
        <td colspan="2">用户登录</td>
    </tr>
<tr>
        <td colspan="1">AccountService.registerAccount(UserVO userVO)</td>
        <td colspan="2">用户注册一个账户</td>
    </tr>
<tr>
        <td colspan="1">AccountService.getUserInfo(int id)</td>
        <td colspan="2">返回用户信息</td>
    </tr>
<tr>
        <td colspan="1">AccountService.updateInfo(UserInfoVO userInfoVO,int id)</td>
        <td colspan="2">更新用户信息</td>
    </tr>
<tr>
        <td colspan="1">AccountService.changeCredit(int id,double chargeMoney)</td>
        <td colspan="2">更新用户信息</td>
    </tr>
</table>



<center>表 AccountService模块的接口规范</center>
<table border="1">
<tr>
    <th colspan="3">提供的服务（供接口）</th>
</tr>
    <tr>
    <td rowspan="3">UserService.registerAccount</td>
    <td>语法</td>
    <td>public ResponseVO registerAccount(UserVO userVO)</td>
</tr>
    <tr>
        <td>前置条件</td>
        <td>无</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>更新用户信息</td>
    </tr>
    <tr>
    <td rowspan="3">UserService.login</td>
    <td>语法</td>
    <td>public User login(UserForm userForm) </td>
</tr>
    <tr>
        <td>前置条件</td>
        <td>使用者已经注册</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>将用户信息保存在session中</td>
    </tr>
    <tr>
    <td rowspan="3">UserService.getUserInfo</td>
    <td>语法</td>
    <td>public User getUserInfo(int id)</td>
</tr>
    <tr>
        <td>前置条件</td>
        <td>使用者已登录</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回此用户的个人信息</td>
    </tr>
    <tr>
    <td rowspan="3">UserService.updateUserInfo</td>
    <td>语法</td>
    <td>public ResponseVO updateUserInfo(int id, String password, String username, String phonenumber)</td>
</tr>
    <tr>
        <td>前置条件</td>
        <td>使用者已登录</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>系统更新用户个人信息</td>
    </tr>
    <tr>
    <td rowspan="3">UserService.changeCredit</td>
    <td>语法</td>
    <td>public ResponseVO changeCredit(int id, double chargeMoney)</td>
</tr>
    <tr>
        <td>前置条件</td>
        <td>使用者已登录</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>系统更新用户信用分</td>
    </tr>
       <th colspan="3">
    需要的服务（需接口）
</th>
 </tr>
    <tr>
        <td colspan="1">服务名</td>
        <td colspan="2">服务</td>
    </tr>
    <tr>
        <td colspan="1">AccountMapper.createNewAccount(User user)</td>
        <td colspan="2">创建新的账号</td>
    </tr>
    <tr>
        <td colspan="1">AccountMapper.getAccountByName(@Param("email") String email)</td>
        <td colspan="2">根据用户名查找账号</td>
    </tr>
    <tr>
        <td colspan="1">UserForm.getEmail()</td>
        <td colspan="2">得到用户邮箱</td>
    </tr>
    <tr>
        <td colspan="1">User.getPassword()</td>
        <td colspan="2">得到用户密码</td>
    </tr>
    <tr>
        <td colspan="1">UserForm.getPassword()</td>
        <td colspan="2">得到用户密码</td>
    </tr>
    <tr>
        <td colspan="1">AccountMapper.getAccountById(@Param("id") int id)</td>
        <td colspan="2">根据id查找账号</td>
    </tr>
<tr>
        <td colspan="1">AccountMapper.changeCredit(int id，double credit)</td>
        <td colspan="2">给指定id用户更新credit</td>
    </tr>
    <tr>
        <td colspan="1">AccountMapper.updateAccount(@Param("id") int id, @Param("password") String password,@Param("userName") String username, @Param("phoneNumber") String phonenumber)</td>
        <td colspan="2">更新账户信息</td>
    </tr>
</table>

（4）业务逻辑层的动态模型

注册账户的顺序图

![](https://lililizi.oss-cn-beijing.aliyuncs.com/112.png)

修改个人信息的顺序图

![](https://lililizi.oss-cn-beijing.aliyuncs.com/113.png)

登录的顺序图

![](https://lililizi.oss-cn-beijing.aliyuncs.com/115.png)

获得个人信息的顺序图

![](https://lililizi.oss-cn-beijing.aliyuncs.com/116.png)

更改信用积分的顺序图

![](https://lililizi.oss-cn-beijing.aliyuncs.com/118.png)



#### 4.1.3 Orderbl模块

​	（1）模块概述

​		Orderbl模块承担的需求参见需求规格说明文档功能需求及相关非功能需求。

​		Orderbl模块的职责及接口参见软件系统结构描述文档。

​	（2）整体结构

​		 我们将系统分为展示层，业务逻辑层，数据层。每一层之间为了增加灵活性，我们会添加接口。在展示层和业务逻辑层之间，我们添加OrderService接口。业务逻辑层和数据层之间添加OrderMapper接口。为了隔离业务逻辑职责和逻辑控制职责，我们增加了OrderController。OrderController会将对账户和酒店的管理委托给OrderService对象。Order是订单的持久化对象。

Orderbl的模块设计如图	

![](https://58467-67.oss-cn-shanghai.aliyuncs.com/%E6%9C%AA%E5%91%BD%E5%90%8D%E6%96%87%E4%BB%B6%20%2810%29.png)

Orderbl模块各个类的职责如表所示

| 模块            | 职责                                     |
| --------------- | ---------------------------------------- |
| OrderController | 负责实现订单页面所需要的的服务           |
| OrderService    | 帮助完成订单界面所需要的的服务           |
| Order           | 系统用户的领域模型对象，可以解决订单问题 |

​	（3）模块内部类的接口规范

<center>表 OrderController模块的接口规范</center>
<table border="1">
<tr>
    <th colspan="3">提供的服务（供接口）</th>
</tr>
    <tr>
    <td rowspan="3">OrderController.reserveHotel</td>
    <td>语法</td>
    <td>public ResponseVO reserveHotel(@RequestBody OrderVO orderVO)</td>
</tr>
    <tr>
        <td>前置条件</td>
        <td>客户已注册登录且达到信用累积制度要求</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>生成预定订单，储存本次预定记录；更新酒店空闲房间信息；更新客户信用等级</td>
    </tr>
    <tr>
    <td rowspan="3">OrderController.retrieveAllOrders</td>
    <td>语法</td>
    <td>public ResponseVO retrieveAllOrders()</td>
</tr>
    <tr>
        <td>前置条件</td>
        <td>使用者已经登录</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回所有订单详细信息</td>
    </tr>
    <tr>
    <td rowspan="3">OrderController.retrieveUserOrders</td>
    <td>语法</td>
    <td>public  ResponseVO retrieveUserOrders(@PathVariable int userid)</td>
</tr>
    <tr>
        <td>前置条件</td>
        <td>使用者是酒店管理人员且已经选择用户</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回此用户的订单信息</td>
    </tr>
    <tr>
    <td rowspan="3">OrderController.annulOrder</td>
    <td>语法</td>
    <td>public ResponseVO annulOrder(@PathVariable int orderid)</td>
</tr>
    <tr>
        <td>前置条件</td>
        <td>使用者选择某一订单</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>取消此订单</td>
    </tr>
        <tr>
    <td rowspan="3">OrderController.getHotelAllOrders</td>
    <td>语法</td>
    <td>public ResponseVO getHotelAllOrders(@RequestParam Integer hotelId)</td>
</tr>
    <tr>
        <td>前置条件</td>
        <td>使用者为酒店管理人员</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>展示指定酒店所有订单</td>
    </tr>
    <tr>
    <td rowspan="3">OrderController.getHotelAbOrders</td>
    <td>语法</td>
    <td>public ResponseVO getHotelAbOrders(@RequestParam Integer hotelId)</td>
</tr>
    <tr>
        <td>前置条件</td>
        <td>使用者为酒店管理人员</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>展示指定酒店所有异常订单</td>
    </tr>
        <tr>
    <td rowspan="3">OrderController.checkIn</td>
    <td>语法</td>
    <td>public ResponseVO checkIn(@PathVariable int id)</td>
</tr>
    <tr>
        <td>前置条件</td>
        <td>使用者为酒店管理人员</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>使此订单改为入住状态</td>
    </tr>
            <tr>
                <td rowspan="3">OrderController.checkOut</td>
    <td>语法</td>
    <td>public ResponseVO checkOut(@PathVariable int id)</td>
</tr>
    <tr>
        <td>前置条件</td>
        <td>使用者为酒店管理人员</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>使此订单改为退房状态</td>
    </tr>
    <tr>
        <td rowspan="3">OrderController.updateCheckout</td>
    <td>语法</td>
    <td>public ResponseVO updateCheckout(@RequestBody OrderVO orderVO, @PathVariable int id)</td>
</tr>
    <tr>
        <td>前置条件</td>
        <td>使用者为酒店管理人员</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>设置此订单的预计退房时间</td>
    </tr>
       <th colspan="3">
    需要的服务（需接口）
</th>
 </tr>
    <tr>
        <td colspan="1">服务名</td>
        <td colspan="2">服务</td>
    </tr>
    <tr>
        <td colspan="1">OrderService.addOrder</td>
        <td colspan="2">生成预定订单，储存本次预定记录；更新酒店空闲房间信息；更新客户信用等级</td>
    </tr>
    <tr>
        <td colspan="1">OrderService.getAllOrders</td>
        <td colspan="2">返回所有订单详细信息</td>
    </tr>
    <tr>
        <td colspan="1">OrderService.getUserOrders</td>
        <td colspan="2">返回此用户的订单信息</td>
    </tr>
    <tr>
        <td colspan="1">OrderService.annulOrder</td>
        <td colspan="2">取消此订单</td>
    </tr>
    <tr>
        <td colspan="1">OrderService.getHotelAllOrders</td>
        <td colspan="2">展示指定酒店所有订单</td>
    </tr>
    <tr>
        <td colspan="1">OrderService.getHotelAbOrders</td>
        <td colspan="2">展示指定酒店所有异常订单</td>
    </tr>
    <tr>
        <td colspan="1">OrderService.checkIn</td>
        <td colspan="2">使此订单改为入住状态</td>
    </tr>
    <tr>
        <td colspan="1">OrderService.checkOut</td>
        <td colspan="2">使此订单改为退房状态</td>
    </tr>
    <tr>
        <td colspan="1">OrderService.updateCheckout</td>
        <td colspan="2">设置此订单的预计退房时间</td>
    </tr>
</table>

<center>表 OrderService模块的接口规范</center>
<table border="1">
<tr>
    <th colspan="3">提供的服务（供接口）</th>
</tr>
    <tr>
    <td rowspan="3">OrderService.addOrder</td>
    <td>语法</td>
    <td>public ResponseVO addOrder(OrderVO orderVO)</td>
</tr>
    <tr>
        <td>前置条件</td>
        <td>客户已注册登录且达到信用累积制度要求</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>生成预定订单，储存本次预定记录；更新酒店空闲房间信息；更新客户信用等级</td>
    </tr>
    <tr>
    <td rowspan="3">OrderService.getAllOrders</td>
    <td>语法</td>
    <td>public List&lt;Order> getAllOrders()</td>
</tr>
    <tr>
        <td>前置条件</td>
        <td>使用者已经登录</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回所有订单详细信息</td>
    </tr>
    <tr>
    <td rowspan="3">OrderService.getUserOrders</td>
    <td>语法</td>
    <td>public List&lt;Order> getUserOrders(int userid)</td>
</tr>
    <tr>
        <td>前置条件</td>
        <td>使用者是酒店管理人员且已经选择用户</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回此用户的订单信息</td>
    </tr>
    <tr>
    <td rowspan="3">OrderService.annulOrder</td>
    <td>语法</td>
    <td>public ResponseVO annulOrder(int orderid)</td>
</tr>
    <tr>
        <td>前置条件</td>
        <td>使用者选择某一订单</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>取消此订单</td>
    </tr>
        <tr>
    <td rowspan="3">OrderService.getHotelAllOrders</td>
    <td>语法</td>
    <td>public List&lt;Order> getHotelAllOrders(Integer hotelId)</td>
</tr>
    <tr>
        <td>前置条件</td>
        <td>使用者为酒店管理人员</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>展示指定酒店所有订单</td>
    </tr>
    <tr>
    <td rowspan="3">OrderService.getHotelAbOrders</td>
    <td>语法</td>
    <td>public List&lt;Order> getHotelAbOrders(Integer hotelId)</td>
</tr>
    <tr>
        <td>前置条件</td>
        <td>使用者为酒店管理人员</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>展示指定酒店所有异常订单</td>
    </tr>
        <tr>
    <td rowspan="3">OrderService.checkIn</td>
    <td>语法</td>
    <td>public ResponseVO checkIn(int id)</td>
</tr>
    <tr>
        <td>前置条件</td>
        <td>使用者为酒店管理人员</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>使此订单改为入住状态</td>
    </tr>
            <tr>
                <td rowspan="3">OrderService.checkOut</td>
    <td>语法</td>
    <td>public ResponseVO checkOut(int id)</td>
</tr>
    <tr>
        <td>前置条件</td>
        <td>使用者为酒店管理人员</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>使此订单改为退房状态</td>
    </tr>
    <tr>
        <td rowspan="3">OrderService.updateCheckout</td>
    <td>语法</td>
    <td>public ResponseVO updateCheckout(int id,String checkOutDate)</td>
</tr>
    <tr>
        <td>前置条件</td>
        <td>使用者为酒店管理人员</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>设置此订单的预计退房时间</td>
    </tr>
       <th colspan="3">
    需要的服务（需接口）
</th>
 </tr>
    <tr>
        <td colspan="1">服务名</td>
        <td colspan="2">服务</td>
    </tr>
    <tr>
        <td colspan="1">OrderVO.getRoomNum()</td>
        <td colspan="2">返回订单房间数量</td>
    </tr>
    <tr>
        <td colspan="1">OrderVO.getHotelId()</td>
        <td colspan="2">返回订单酒店id</td>
    </tr>
    <tr>
        <td colspan="1">OrderVO.getRoomType()</td>
        <td colspan="2">返回订单房间类型</td>
    </tr>
    <tr>
        <td colspan="1">HotelService.getRoomCurNum(Integer hotelId,String roomType)</td>
        <td colspan="2">返回指定酒店指定房间类型的数量</td>
    </tr>
    <tr>
        <td colspan="1">ResponseVO.buildFailure(String message)</td>
        <td colspan="2">返回构建失败</td>
    </tr>
    <tr>
        <td colspan="1">OrderVO.setCreateDate(String createDate)</td>
        <td colspan="2">设置订单创建时间</td>
    </tr>
    <tr>
        <td colspan="1">OrderVO.setOrderState(String orderState)</td>
        <td colspan="2">设置订单状态</td>
    </tr>
    <tr>
        <td colspan="1">AccountService.getUserInfo(int id)</td>
        <td colspan="2">获取用户信息</td>
    </tr>
    <tr>
        <td colspan="1">OrderVO.getUserId()</td>
        <td colspan="2">获取订单用户id</td>
    </tr>
    <tr>
        <td colspan="1">User.getUserName()</td>
        <td colspan="2">获取用户姓名</td>
    </tr>
    <tr>
        <td colspan="1">OrderVO.setClientName(String clientName)</td>
        <td colspan="2">设置客户姓名</td>
    </tr>
    <tr>
        <td colspan="1">User.getPhoneNumber()</td>
        <td colspan="2">得到用户电话</td>
    </tr>
    <tr>
        <td colspan="1">OrderVO.setPhoneNumber(String phoneNumber)</td>
        <td colspan="2">设置客户电话</td>
    </tr>
    <tr>
        <td colspan="1">OrderMapper.addOrder(Order order)</td>
        <td colspan="2">添加订单</td>
    </tr>
    <tr>
        <td colspan="1">HotelService.updateRoomInfo(Integer hotelId, String roomType,Integer rooms)</td>
        <td colspan="2">更新房间信息</td>
    </tr>
    <tr>
        <td colspan="1">OrderMapper.getAllOrders()</td>
        <td colspan="2">得到所有订单</td>
    </tr>
    <tr>
        <td colspan="1">OrderMapper.getUserOrders(@Param("userid") int userid)</td>
        <td colspan="2">得到指定用户的订单</td>
    </tr>
<tr>
        <td colspan="1">OrderMapper.getLateUserId(@Param("today")String today)</td>
        <td colspan="2">得到异常的订单</td>
    </tr>
<tr>
        <td colspan="1">OrderMapper.getLateCredit(@Param("today")String today)</td>
    <td colspan="2">得到异常的订单的信用值</td>
    </tr>
<tr>
        <td colspan="1">Account.minusCredit(@Param("id") int userId,@Param("credit") double credit)</td>
    <td colspan="2">扣除信用值</td>
    </tr>
<tr>
        <td colspan="1">Orderapper.updateToday(@Param("today")String today)</td>
    <td colspan="2">更新今日订单状况</td>
    </tr>
</table>

（4）业务逻辑层的动态模型

添加订单的顺序图

![](https://58467-67.oss-cn-shanghai.aliyuncs.com/111/%E6%9C%AA%E5%91%BD%E5%90%8D%E6%96%87%E4%BB%B6%20%281%29.png)

显示所有订单的顺序图

![](https://58467-67.oss-cn-shanghai.aliyuncs.com/111/%E6%9C%AA%E5%91%BD%E5%90%8D%E6%96%87%E4%BB%B6%20%283%29.png)

得到用户所有订单的顺序图

![](https://58467-67.oss-cn-shanghai.aliyuncs.com/111/%E6%9C%AA%E5%91%BD%E5%90%8D%E6%96%87%E4%BB%B6%20%284%29.png)

取消订单的顺序图

![](https://58467-67.oss-cn-shanghai.aliyuncs.com/111/%E6%9C%AA%E5%91%BD%E5%90%8D%E6%96%87%E4%BB%B6%20%285%29.png)

得到酒店所有订单的顺序图

![](https://58467-67.oss-cn-shanghai.aliyuncs.com/111/%E6%9C%AA%E5%91%BD%E5%90%8D%E6%96%87%E4%BB%B6%20%286%29.png)

得到酒店异常订单的顺序图

![](https://58467-67.oss-cn-shanghai.aliyuncs.com/111/%E6%9C%AA%E5%91%BD%E5%90%8D%E6%96%87%E4%BB%B6%20%287%29.png)

入住的顺序图

![](https://58467-67.oss-cn-shanghai.aliyuncs.com/111/%E6%9C%AA%E5%91%BD%E5%90%8D%E6%96%87%E4%BB%B6%20%288%29.png)

退房的顺序图

![](https://58467-67.oss-cn-shanghai.aliyuncs.com/111/%E6%9C%AA%E5%91%BD%E5%90%8D%E6%96%87%E4%BB%B6%20%289%29.png)

设置预计退房日期的顺序图

![](https://58467-67.oss-cn-shanghai.aliyuncs.com/111/%E6%9C%AA%E5%91%BD%E5%90%8D%E6%96%87%E4%BB%B6%20%282%29.png)



#### 4.1.4Couponbl模块

（1）模块概述

​		Couponbl模块承担的需求参见需求规格说明文档功能需求及相关非功能需求。

​		Couponbl模块的职责及接口参见软件系统结构描述文档。

​	（2）整体结构

​		 我们将系统分为展示层，业务逻辑层，数据层。每一层之间为了增加灵活性，我们会添加接口。在展示层和业务逻辑层之间，我们添加AccountService接口。业务逻辑层和数据层之间添加AccountMapper接口。为了隔离业务逻辑职责和逻辑控制职责，我们增加了AccountController。AccountController会将对账户和酒店的管理委托给AccountService对象。Coupon是优惠策略的持久化对象。

Couponbl的模块设计如图	

​	![](https://lamada.oss-cn-beijing.aliyuncs.com/%E6%A8%A1%E5%9D%97%E7%B1%BB%E5%9B%BE.png)

Couponbl模块各个类的职责如表所示

| 模块             | 职责                                         |
| ---------------- | -------------------------------------------- |
| CouponController | 负责实现优惠策略所需要的的服务               |
| CouponService    | 帮助完成优惠策略所需要的的服务               |
| Coupon           | 系统用户的领域模型对象，可以解决优惠策略问题 |

​	（3）模块内部类的接口规范

<center>表 CouponController模块的接口规范</center>
<table border="1">
<tr>
    <th colspan="3">提供的服务（供接口）</th>
</tr>
    <tr>
    <td rowspan="3">CouponrController.addHotelMultiplyRoomsCoupon</td>
    <td>语法</td>
    <td>public ResponseVO addHotelMultiplyRoomsCoupon(@RequestBody HotelMultiplyRoomsCouponVO hotelMultiplyRoomsCouponVO)</td>
</tr>
    <tr>
        <td>前置条件</td>
        <td>管理人员已登录</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>生成酒店多间优惠，更新酒店优惠列表</td>
    </tr>
    <tr>
    <td rowspan="3">CouponController.addHotelFestivalCoupon</td>
    <td>语法</td>
    <td>ResponseVO addHotelFestivalCoupon(@RequestBody HotelFestivalCouponVO hotelFestivalCouponVO)</td>
</tr>
    <tr>
        <td>前置条件</td>
        <td>管理人员已登录</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>生成酒店节日优惠，更新酒店优惠策略列表</td>
    </tr>
    <tr>
    <td rowspan="3">CouponController.addHotelBirthdayCoupon</td>
    <td>语法</td>
    <td>ResponseVO addHotelBirthdayCoupon(@RequestBody HotelBirthdayCouponVO hotelBirthdayCouponVO)</td>
</tr>
    <tr>
        <td>前置条件</td>
        <td>管理人员已登录</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>生成酒店生日优惠，更新酒店优惠策略列表</td>
    </tr>
    <tr>
    <td rowspan="3">CouponController.addHotelTargetMoneyCoupon</td>
    <td>语法</td>
    <td>public ResponseVO addHotelTargetMoneyCoupon(@RequestBody HotelTargetMoneyCouponVO hotelTargetMoneyCouponVO)</td>
</tr>
    <tr>
        <td>前置条件</td>
        <td>管理人员已登录</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>生成酒店满减优惠，更新酒店优惠策略列表</td>
    </tr>
        <tr>
    <td rowspan="3">CouponController.getHotelAllCoupons</td>
    <td>语法</td>
    <td>public ResponseVO getHotelAllCoupons(@RequestParam Integer hotelId)</td>
</tr>
    <tr>
        <td>前置条件</td>
        <td>管理人员已登录</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>展示指定酒店所有优惠策略</td>
    </tr>
    <tr>
    <td rowspan="3">CouponController.getOrderMatchCoupons</td>
    <td>语法</td>
    <td> public ResponseVO getOrderMatchCoupons(@RequestParam Integer userId,
                                           @RequestParam Integer hotelId,
                                           @RequestParam Double orderPrice,
                                           @RequestParam Integer roomNum,
                                           @RequestParam String checkIn,
                                           @RequestParam String checkOut)</td>
</tr>
    <tr>
        <td>前置条件</td>
        <td>用户已登录</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>获得订单满足的优惠策略列表</td>
</tr>
       <th colspan="3">
    需要的服务（需接口）
</th>
 </tr>
    <tr>
        <td colspan="1">服务名</td>
        <td colspan="2">服务</td>
    </tr>
    <tr>
        <td colspan="1">CouponService.addHotelBirthdayCoupon</td>
        <td colspan="2">生成酒店生日优惠，更新酒店优惠列表</td>
    </tr>
    <tr>
        <td colspan="1">CouponService.addHotelMultiplyRoomsCoupon</td>
        <td colspan="2">生成酒店多间优惠，更新酒店优惠列表</td>
    </tr>
    <tr>
        <td colspan="1">CouponService.addHotelTargetMoneyCoupon</td>
        <td colspan="2">生成酒店满减优惠，更新酒店优惠列表</td>
    </tr>
    <tr>
        <td colspan="1">CouponService.addHotelFestivalCoupon</td>
        <td colspan="2">生成酒店节日优惠，更新酒店优惠列表</td>
    </tr>
    <tr>
        <td colspan="1">CouponService.getHotelAllCoupons</td>
        <td colspan="2">展示指定酒店所有优惠策略</td>
    </tr>
    <tr>
        <td colspan="1">CouponService.getMatchOrderCoupon</td>
        <td colspan="2">展示用户订单能使用的</td>
    </tr>
</table>



 <center>表 CouponService模块的接口规范</center>
<table border="1">
<tr>
    <th colspan="3">提供的服务（供接口）</th>
</tr>
    <tr>
    <td rowspan="3">CouponService.addHotelBirthdayCoupon</td>
    <td>语法</td>
    <td>CouponVO addHotelBirthdayCoupon(HotelBirthdayCouponVO couponVO)</td>
</tr>
    <tr>
        <td>前置条件</td>
        <td>管理人员已登录</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>生成酒店生日优惠，更新酒店优惠列表</td>
    </tr>
    <tr>
    <td rowspan="3">CouponService.addHotelMultiplyRoomsCoupon</td>
    <td>语法</td>
    <td>CouponVO addHotelMultiplyRoomsCoupon(HotelMultiplyRoomsCouponVO couponVO)</td>
</tr>
    <tr>
        <td>前置条件</td>
        <td>管理人员已登录</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>生成酒店多间优惠，更新酒店优惠列表</td>
    </tr>
    <tr>
    <td rowspan="3">CouponService.addHotelTargetMoneyCoupon</td>
    <td>语法</td>
    <td>CouponVO addHotelTargetMoneyCoupon(HotelTargetMoneyCouponVO couponVO)</td>
</tr>
    <tr>
        <td>前置条件</td>
        <td>管理人员已登录</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>生成酒店满减优惠，更新酒店优惠列表</td>
    </tr>
    <tr>
    <td rowspan="3">CouponService.addHotelFestivalCoupon</td>
    <td>语法</td>
    <td>CouponVO addHotelFestivalCoupon(HotelFestivalCouponVO couponVO)</td>
</tr>
    <tr>
        <td>前置条件</td>
        <td>管理人员已登录</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>生成酒店节日优惠，更新酒店优惠列表</td>
    </tr>
        <tr>
    <td rowspan="3">CouponService.getMatchOrderCoupon</td>
    <td>语法</td>
    <td>List<Coupon> getMatchOrderCoupon(OrderVO orderVO)</td>
</tr>
    <tr>
        <td>前置条件</td>
        <td>用户已登录</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>展示订单可以使用的优惠</td>
    </tr>
    <tr>
    <td rowspan="3">CouponService.getHotelAllCoupon</td>
    <td>语法</td>
    <td>List<Coupon> getHotelAllCoupon(Integer hotelId)</td>
</tr>
    <tr>
        <td>前置条件</td>
        <td>管理人员已登录</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>展示指定酒店所有优惠策略</td>
    </tr>
               <th colspan="3">
    需要的服务（需接口）
</th>
 </tr>
    <tr>
        <td colspan="1">服务名</td>
        <td colspan="2">服务</td>
    </tr>
    <tr>
        <td colspan="1">CouponVO.getHotelId()</td>
        <td colspan="2">返回酒店id</td>
    </tr>
    <tr>
        <td colspan="1">CouponVO.getName()</td>
        <td colspan="2">返回优惠名称</td>
    </tr>
    <tr>
        <td colspan="1">CouponVO.getDescription()</td>
        <td colspan="2">返回优惠描述</td>
    </tr>
    <tr>
        <td colspan="1">CouponVO.getType()</td>
        <td colspan="2">返回优惠类型</td>
    </tr>
    <tr>
        <td colspan="1">CouponVO.setId(Integer ID)</td>
        <td colspan="2">设置优惠ID</td>
    </tr>
    <tr>
        <td colspan="1">CouponVO.getRoomNum()</td>
        <td colspan="2">获取多间优惠的房间数量</td>
    </tr>
    <tr>
        <td colspan="1">CouponVO.getDiscount()</td>
        <td colspan="2">获取优惠的折扣</td>
    </tr>
    <tr>
        <td colspan="1">couponVO.getTargetMoney()</td>
        <td colspan="2">获取满减优惠的达标金额</td>
    </tr>
    <tr>
        <td colspan="1">CouponVO.getStartTime()</td>
        <td colspan="2">获取节日优惠的开始时间</td>
    </tr>
    <tr>
        <td colspan="1">couponVO.getEndTime()</td>
        <td colspan="2">获取节日优惠的结束时间</td>
    </tr>
    <tr>
        <td colspan="1">CouponMapper.insertCoupon(coupon)</td>
        <td colspan="2">添加优惠</td>
    </tr>
    <tr>
        <td colspan="1">Coupon.selectByHotelId</td>
        <td colspan="2">根据酒店id选取酒店的优惠</td>
    </tr>

​    （4）业务逻辑层的动态模型

添加满减优惠顺序图

![](https://lamada.oss-cn-beijing.aliyuncs.com/%E6%BB%A1%E5%87%8F.png)

添加多间优惠顺序图

![](https://lamada.oss-cn-beijing.aliyuncs.com/%E5%A4%9A%E9%97%B4.png)

添加节日优惠顺序图

![](https://lamada.oss-cn-beijing.aliyuncs.com/%E8%8A%82%E6%97%A5.png)

添加生日优惠顺序图

![](https://lamada.oss-cn-beijing.aliyuncs.com/%E7%94%9F%E6%97%A5.png)



### 4.1.5 hotelbl模块

​	（1）模块概述

​		hotelbl模块承担的需求参见需求规格说明文档功能需求及相关非功能需求。

​		hotelbl模块的职责及接口参见软件系统结构描述文档。

​	（2）整体结构

​		 我们将系统分为展示层，业务逻辑层，数据层。每一层之间为了增加灵活性，我们会添加接口。在展示层和业务逻辑层之间，我们添加HotelService和RoomService接口。业务逻辑层和数据层之间添加HotelMapper和RoomService接口。为了隔离业务逻辑职责和逻辑控制职责，我们增加了HotelController。HotelController会将对账户和酒店的管理委托给HotelService和RoomService对象。Hotel是酒店信息的持久化对象，HotelRoom是房间信息的持久化对象。

​		hotelbl的模块设计如图

![](https://58467.oss-cn-shanghai.aliyuncs.com/%E5%9B%BE/%E9%9C%80%E6%B1%82%E8%A7%84%E6%A0%BC%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/%E6%A8%A1%E5%9D%97%E8%AE%BE%E8%AE%A1.png)

​		hotelbl模块各个类的职责如表所示

| 模块            | 职责                                 |
| --------------- | ------------------------------------ |
| HotelController | 负责实现浏览和预定页面所需要的的服务 |
| HotelService    | 帮助完成浏览和预定页面所需要的的服务 |
| RoomService     | 帮助完成浏览和预定页面所需要的的服务 |

​	（3）模块内部类的接口规范

<center>表 AdminController模块的接口规范</center>
<table border="1">
<tr>
    <th colspan="3">提供的服务（供接口）</th>
</tr>
    <tr>
    <td rowspan="4">HotelController.createHotel</td>
    <td>语法</td>
    <td>public ResponseVO createHotel(@RequestBody HotelVO hotelVO)</td>
</tr>
    <tr>
    <tr>
        <td>前置条件</td>
        <td>已创建hotelService对象，并且输入符合输入规则</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>调用hotelService的createHotel方法</td>
    </tr>
    <tr>
    <td rowspan="4">HotelController.retrieveAllHotels</td>
    <td>语法</td>
    <td>public ResponseVO retrieveAllHotels()</td>
</tr>
    <tr>
    <tr>
        <td>前置条件</td>
        <td>已创建hotelService对象，并且输入符合输入规则</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>调用hotelService的retrieveHotels方法</td>
    </tr>
    <tr>
    <td rowspan="4">HotelController.searchHotels</td>
    <td>语法</td>
    <td>    public ResponseVO searchHotels(@RequestParam("address") String address,@RequestParam("bizRegion") String bizRegion)</td>
</tr>
    <tr>
    <tr>
        <td>前置条件</td>
        <td>已创建hotelservice对象，并且输入符合输入规则</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>调用hotelService的searchHotels方法</td>
    </tr>
    <tr>
    <td rowspan="4">HotelController.filterHotels</td>
    <td>语法</td>
    <td>public ResponseVO filterHotels(@RequestBody FilterConditionVO filterConditionVO)</td>
</tr>
    <tr>
    <tr>
        <td>前置条件</td>
        <td>已创建hotelservice对象，并且输入符合输入规则</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>调用hotelService的filterHotels方法</td>
    </tr>
    <tr>
    <td rowspan="4">HotelController.priceSortHotels</td>
    <td>语法</td>
    <td>public ResponseVO priceSortHotels()</td>
</tr>
    <tr>
    <tr>
        <td>前置条件</td>
        <td>已创建hotelService对象，并且输入符合输入规则</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>调用hotelService的priceSortHotels方法</td>
    </tr>
    <tr>
    <td rowspan="4">HotelController.rateSortHotels</td>
    <td>语法</td>
    <td>public ResponseVO rateSortHotels()</td>
</tr>
    <tr>
    <tr>
        <td>前置条件</td>
        <td>已创建hotelService对象，并且输入符合输入规则</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>调用hotelService的rateSortHotels方法</td>
    </tr>
    <tr>
    <td rowspan="4">HotelController.addRoomInfo</td>
    <td>语法</td>
    <td>public ResponseVO addRoomInfo(@RequestBody HotelRoom hotelRoom)</td>
</tr>
    <tr>
    <tr>
        <td>前置条件</td>
        <td>已创建roomService对象，并且输入符合输入规则</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>调用roomService的insertRoomInfo方法</td>
    </tr>
    <tr>
    <td rowspan="4">HotelController.retrieveHotelDetail</td>
    <td>语法</td>
    <td>public ResponseVO retrieveHotelDetail(@PathVariable Integer hotelId)</td>
</tr>
    <tr>
    <tr>
        <td>前置条件</td>
        <td>已创建hotelService对象，并且输入符合输入规则</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>调用hotelService的retrieveHotelDetail方法</td>
    </tr>
    <tr>
    <td rowspan="4">HotelController.retrieveHotelOrders</td>
    <td>语法</td>
    <td>public ResponseVO retrieveHotelOrders(@PathVariable Integer hotelId)</td>
</tr>
    <tr>
    <tr>
        <td>前置条件</td>
        <td>已创建hotelService对象，并且输入符合输入规则</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>调用hotelService的getHotelOrders方法</td>
    </tr>
    <tr>
    <td rowspan="4">HotelController.retrieveMgrHotels</td>
    <td>语法</td>
    <td>public ResponseVO retrieveMgrHotels(@PathVariable int id)</td>
</tr>
    <tr>
    <tr>
        <td>前置条件</td>
        <td>已创建hotelService对象，并且输入符合输入规则</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>调用hotelService的retrieveMgrHotels方法</td>
    </tr>
    <tr>
    <td rowspan="4">HotelController.updateHotelInfo</td>
    <td>语法</td>
    <td>public ResponseVO updateHotelInfo(@RequestBody HotelVO hotelVO, @PathVariable Integer id)</td>
</tr>
    <tr>
    <tr>
        <td>前置条件</td>
        <td>已创建hotelService对象，并且输入符合输入规则</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>调用hotelService的updateHotelInfo方法</td>
    </tr>
    <tr>
    <td rowspan="4">HotelController.getHotelAllRoom</td>
    <td>语法</td>
    <td>public ResponseVO getHotelAllRoom(@RequestParam Integer hotelId)</td>
</tr>
    <tr>
    <tr>
        <td>前置条件</td>
        <td>已创建roomService对象，并且输入符合输入规则</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>调用roomService的getHotelAllRoom方法</td>
    </tr>
    <tr>
    <td rowspan="4">HotelController.updatePriceInfo</td>
    <td>语法</td>
    <td>public ResponseVO updatePriceInfo(@RequestBody RoomVO roomVO, @PathVariable int id)
</td>
</tr>
    <tr>
    <tr>
        <td>前置条件</td>
        <td>已创建roomService对象，并且输入符合输入规则</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>调用roomService的updatePriceInfo方法</td>
    </tr>
    <tr>
    <td rowspan="4">HotelController.updateNumInfo</td>
    <td>语法</td>
    <td>public ResponseVO updateNumInfo(@RequestBody RoomVO roomVO, @PathVariable int id)</td>
</tr>
    <tr>
    <tr>
        <td>前置条件</td>
        <td>已创建roomService对象，并且输入符合输入规则</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>调用roomService的updateNumInfo方法</td>
    </tr>
    <tr>
    <td rowspan="4">HotelController.deleteRoom</td>
    <td>语法</td>
    <td>public ResponseVO deleteRoom(@PathVariable int id)</td>
</tr>
    <tr>
    <tr>
        <td>前置条件</td>
        <td>已创建roomService对象，并且输入符合输入规则</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>调用roomService的deleteRoom方法</td>
    </tr>
<th colspan="3">
    需要的服务（需接口）
</th>
 </tr>
    <tr>
        <td colspan="1">服务名</td>
        <td colspan="2">服务</td>
    </tr>
    <tr>
        <td colspan="1">HotelService.addHotel(HotelVO hotelVO)</td>
        <td colspan="2">添加酒店</td>
    </tr>
<tr>
        <td colspan="1">HotelService.updateRoomInfo(Integer hotelId, String roomType,Integer rooms)</td>
        <td colspan="2">预订酒店修改剩余客房信息</td>
    </tr>
<tr>
        <td colspan="1">HotelService.retrieveHotels()</td>
        <td colspan="2">列表获取酒店信息</td>
    </tr>
<tr>
        <td colspan="1">HotelService.searchHotels(String address,String bizRegion)</td>
        <td colspan="2">按地址和商圈搜索酒店</td>
    </tr>
<tr>
        <td colspan="1">HotelService.filterHotels(FilterConditionVO filterConditionVO)</td>
        <td colspan="2">按条件过滤酒店</td>
    </tr>
<tr>
        <td colspan="1">HotelService.priceSortHotels()</td>
        <td colspan="2">按价格排序酒店</td>
    </tr>
<tr>
        <td colspan="1">HotelService.rateSortHotels()</td>
        <td colspan="2">按评分排序酒店</td>
    </tr>
<tr>
        <td colspan="1">retrieveHotelDetails(Integer hotelId)</td>
        <td colspan="2">获取某家酒店详细信息</td>
    </tr>
<tr>
        <td colspan="1">HotelService.getRoomCurNum(Integer hotelId,String roomType)</td>
        <td colspan="2">查看酒店剩余某种房间数量</td>
    </tr>
<tr>
        <td colspan="1">HotelService.getHotelOrders(Integer hotelId)</td>
        <td colspan="2">查看酒店的所有订单</td>
    </tr>
<tr>
        <td colspan="1">HotelService.retrieveMgrHotels(int id)</td>
        <td colspan="2">查看酒店管理人员的所有酒店</td>
    </tr>
<tr>
        <td colspan="1">HotelService.updateHotelInfo(Integer hotelId, String name,String address, String bizRegion, String description, String hotelStar,String phoneNum)</td>
        <td colspan="2">维护酒店信息</td>
    </tr>
</table>

<center>表 HotelService模块和RoomService模块的接口规范</center>
<table border="1">
<tr>
    <th colspan="3">提供的服务（供接口）</th>
</tr>
    <tr>
    <td rowspan="4">HotelService.addHotel</td>
    <td>语法</td>
    <td>public void addHotel(HotelVO hotelVO)</td>
</tr>
    <tr>
    <tr>
        <td>前置条件</td>
        <td>使用者身份为酒店管理人员</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>添加酒店信息</td>
    </tr>
    <tr>
    <td rowspan="4">HotelService.updateRoomInfo</td>
    <td>语法</td>
    <td>public void updateRoomInfo(Integer hotelId, String roomType, Integer rooms)</td>
</tr>
    <tr>
    <tr>
        <td>前置条件</td>
        <td>使用者身份为酒店管理人员</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>更新酒店房间的信息</td>
    </tr>
    <tr>
    <td rowspan="4">HotelService.retrieveHotels</td>
    <td>语法</td>
    <td>public List&lt;HotelVO> retrieveHotels()</td>
</tr>
    <tr>
    <tr>
        <td>前置条件</td>
        <td>使用者已登录</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>列表获取酒店信息</td>
    </tr>
    <tr>
    <td rowspan="4">HotelService.searchHotels</td>
    <td>语法</td>
    <td>public List&lt;HotelVO> searchHotels(String address,String bizRegion)</td>
</tr>
    <tr>
    <tr>
        <td>前置条件</td>
        <td>使用者已登录</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>按地址和商圈搜索酒店</td>
    </tr>
    <tr>
    <td rowspan="4">HotelService.filtereHotels</td>
    <td>语法</td>
    <td>public List&lt;HotelVO> filterHotels(FilterConditionVO filterConditionVO)</td>
</tr>
    <tr>
    <tr>
        <td>前置条件</td>
        <td>使用者已登录</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>按条件过滤酒店</td>
    </tr>
    <tr>
    <td rowspan="4">HotelService.priceSortHotels</td>
    <td>语法</td>
    <td>public List&lt;HotelVO> priceSortHotels()</td>
</tr>
    <tr>
    <tr>
        <td>前置条件</td>
        <td>使用者已登录</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>按价格排序酒店</td>
    </tr>
    <tr>
    <td rowspan="4">HotelService.rateSortHotels</td>
    <td>语法</td>
    <td>public List&lt;HotelVO> rateSortHotels()</td>
</tr>
    <tr>
    <tr>
        <td>前置条件</td>
        <td>使用者已登录</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>按评分排序酒店</td>
    </tr>
    <tr>
    <td rowspan="4">HotelService.retrieveHotelDetails</td>
    <td>语法</td>
    <td>public HotelVO retrieveHotelDetails(Integer hotelId) </td>
</tr>
    <tr>
    <tr>
        <td>前置条件</td>
        <td>使用者已登录</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>获得酒店详细信息</td>
    </tr>
    <tr>
    <td rowspan="4">HotelService.getRoomCurNum</td>
    <td>语法</td>
    <td>public int getRoomCurNum(Integer hotelId, String roomType)</td>
</tr>
    <tr>
    <tr>
        <td>前置条件</td>
        <td>使用者已登录</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>获得酒店某个类型房间剩余数量</td>
    </tr>
    <tr>
    <td rowspan="4">HotelService.getHotelOrders</td>
    <td>语法</td>
    <td>public List&lt;Order> getHotelOrders(Integer hotelId) </td>
</tr>
    <tr>
    <tr>
        <td>前置条件</td>
        <td>使用者是酒店管理人员</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>获得酒店的所有订单</td>
    </tr>
        <tr>
    <td rowspan="4">HotelService.retrieveMgrHotels</td>
    <td>语法</td>
    <td>public List&lt;HotelVO> retrieveMgrHotels(@RequestParam int id) </td>
</tr>
    <tr>
    <tr>
        <td>前置条件</td>
        <td>使用者是酒店管理人员</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>获得该管理员管理的所有酒店</td>
    </tr>
    <tr>
    <td rowspan="4">HotelService.updateHotelInfo</td>
    <td>语法</td>
    <td>public ResponseVO updateHotelInfo(Integer hotelId, String name,String address, String bizRegion, String description, String hotelStar,String phoneNum) </td>
</tr>
    <tr>
    <tr>
        <td>前置条件</td>
        <td>使用者是酒店管理人员</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>更新该酒店信息</td>
    </tr>
    <tr>
    <td rowspan="4">RoomService.retrieveHotelRoomInfo</td>
    <td>语法</td>
    <td>public List&lt;HotelRoom> retrieveHotelRoomInfo(Integer hotelId) </td>
</tr>
    <tr>
    <tr>
        <td>前置条件</td>
        <td>使用者是酒店管理人员</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>获得酒店的全部房间信息</td>
    </tr>
    <tr>
    <td rowspan="4">RoomService.insertRoomInfo</td>
    <td>语法</td>
    <td>public void insertRoomInfo(HotelRoom hotelRoom) </td>
</tr>
    <tr>
    <tr>
        <td>前置条件</td>
        <td>使用者是酒店管理人员</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>更新酒店客房信息</td>
    </tr>
        <tr>
    <td rowspan="4">RoomService.updateRoomInfo</td>
    <td>语法</td>
    <td>public void updateRoomInfo(Integer hotelId, String roomType, Integer rooms)</td>
</tr>
    <tr>
    <tr>
        <td>前置条件</td>
        <td>使用者是酒店管理人员</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>更新酒店客房房间数量</td>
    </tr>
        <tr>
    <td rowspan="4">RoomService.getRoomCurNum</td>
    <td>语法</td>
    <td>public int getRoomCurNum(Integer hotelId, String roomType)</td>
</tr>
    <tr>
    <tr>
        <td>前置条件</td>
        <td>使用者已经登录</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>获取酒店指定房间的剩余数量</td>
    </tr>
    <tr>
    <td rowspan="4">RoomService.getHotelAllRoom</td>
    <td>语法</td>
    <td>public List&lt;HotelRoom> getHotelAllRoom(Integer hotelId)</td>
</tr>
    <tr>
    <tr>
        <td>前置条件</td>
        <td>使用者已经登录</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>获取指定酒店的所有房间</td>
    </tr>
    <tr>
    <td rowspan="4">RoomService.updateRoomPriceInfo</td>
    <td>语法</td>
    <td>public ResponseVO updateRoomPriceInfo(int id, double price)</td>
</tr>
    <tr>
    <tr>
        <td>前置条件</td>
        <td>使用者是酒店管理人员</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>更新指定房间的价格信息</td>
    </tr>
    <tr>
    <td rowspan="4">RoomService.updateRoomNumInfo</td>
    <td>语法</td>
    <td>public ResponseVO updateRoomNumInfo(int id, Integer num)</td>
</tr>
    <tr>
    <tr>
        <td>前置条件</td>
        <td>使用者是酒店管理人员</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>更新指定房间的数量信息</td>
    </tr>
    <tr>
    <td rowspan="4">RoomService.deleteRoom</td>
    <td>语法</td>
    <td>public ResponseVO deleteRoom(int id)</td>
</tr>
    <tr>
    <tr>
        <td>前置条件</td>
        <td>使用者是酒店管理人员</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>删除房间</td>
    </tr>
<th colspan="3">
    需要的服务（需接口）
</th>
 </tr>
    <tr>
        <td colspan="1">服务名</td>
        <td colspan="2">服务</td>
    </tr>
    <tr>
        <td colspan="1">User.getUserType()</td>
        <td colspan="2">获得用户类型</td>
    </tr>
    <tr>
        <td colspan="1">HotelVO.getManagerId()</td>
        <td colspan="2">获得酒店管理人员的id</td>
    </tr>
    <tr>
        <td colspan="1">Hotel.setDescription(String description)</td>
        <td colspan="2">设置酒店描述</td>
    </tr>
    <tr>
        <td colspan="1">Hotel.setAddress(String address)</td>
        <td colspan="2">设置酒店地址</td>
    </tr>
    <tr>
        <td colspan="1">Hotel.setHotelName(String hotelName)</td>
        <td colspan="2">设置酒店名称</td>
    </tr>
    <tr>
        <td colspan="1">Hotel.setPhoneNum(String phoneNum)</td>
        <td colspan="2">设置酒店电话</td>
    </tr>    
	<tr>
        <td colspan="1">Hotel.setManagerId(Integer managerId)</td>
        <td colspan="2">设置酒店管理人员id</td>
    </tr>    
	<tr>
        <td colspan="1">Hotel.setRate(Double rate)</td>
        <td colspan="2">设置酒店评分</td>
    </tr>
	<tr>
        <td colspan="1">Hotel.setBizRegion(BizRegion bizRegion)</td>
        <td colspan="2">设置酒店商圈</td>
    </tr>
	<tr>
        <td colspan="1">Hotel.setHotelStar(HotelStar hotelStar)</td>
        <td colspan="2">设置酒店星级</td>
    </tr>
    <tr>
        <td colspan="1">HotelMapper.insertHotel(Hotel hotel)</td>
        <td colspan="2">添加酒店</td>
    </tr>
    <tr>
        <td colspan="1">HotelMapper.selectAllHotel()</td>
        <td colspan="2">选择所有酒店</td>
    </tr>
    <tr>
        <td colspan="1">HotelVO.selectById(@Param("id") Integer id)</td>
        <td colspan="2">选择相应id的酒店</td>
    </tr>
    <tr>
        <td colspan="1">RoomVO.setId(Integer id)</td>
        <td colspan="2">设置房间id</td>
    </tr>
    <tr>
        <td colspan="1">RoomVO.setPrice(Double price)</td>
        <td colspan="2">设置房间价格</td>
    </tr>
    <tr>
        <td colspan="1">RoomVO.setRoomType(String roomType)</td>
        <td colspan="2">设置房间类型</td>
    </tr>
    <tr>
        <td colspan="1">RoomVO.setCurNum(Integer curNum)</td>
        <td colspan="2">设置房间剩余数量</td>
    </tr>
    <tr>
        <td colspan="1">RoomVO.setTotal(Integer total)</td>
        <td colspan="2">设置房间总量</td>
    </tr>
    <tr>
        <td colspan="1">HotelVO.setRooms(List&lt;RoomVO> rooms)</td>
        <td colspan="2">设置酒店房间数量</td>
    </tr>
    <tr>
        <td colspan="1">HotelRoom.getId()</td>
        <td colspan="2">获得酒店房间id</td>
    </tr>
    <tr>
        <td colspan="1">HotelRoom.getId()</td>
        <td colspan="2">获得酒店房间id</td>
    </tr>
    <tr>
        <td colspan="1">HotelRoom.getPrice()</td>
        <td colspan="2">获得酒店房间价格</td>
    </tr>
    <tr>
        <td colspan="1">HotelRoom.getRoomType()</td>
        <td colspan="2">获得酒店房间类型</td>
    </tr>
    <tr>
        <td colspan="1">HotelRoom.getCurNum()</td>
        <td colspan="2">获得酒店房间剩余数量</td>
    </tr>
    <tr>
        <td colspan="1">HotelRoom.getTotal()</td>
        <td colspan="2">获得酒店房间总数</td>
    </tr>
    <tr>
        <td colspan="1">RoomMapper.selectRoomsByHotelId(@Param("hotelId") Integer hotelId)</td>
        <td colspan="2">根据酒店id获取房间</td>
    </tr>
    <tr>
        <td colspan="1">RoomMapper.insertRoom(HotelRoom hotelRoom)</td>
        <td colspan="2">加入酒店房间</td>
    </tr>
    <tr>
        <td colspan="1">RoomMapper.updateRoomInfo(@Param("hotelId") Integer hotelId,@Param("roomType") String roomType,@Param("curNum") Integer curNum)</td>
        <td colspan="2">更新酒店房间信息</td>
    </tr>
    <tr>
        <td colspan="1">RoomMapper.getRoomCurNum(Integer hotelId, String roomType) </td>
        <td colspan="2">获得酒店剩余房间数量</td>
    </tr>
    <tr>
        <td colspan="1">HotelMapper.selectMgrHotel(int id) </td>
        <td colspan="2">获得管理员管理的酒店</td>
    </tr>
    <tr>
        <td colspan="1">HotelMapper.updateHotel(@Param("id") Integer hotelId, @Param("name")String name,@Param("address") String address,@Param("bizRegion") String bizRegion,
                    @Param("hotelDescription") String description,@Param("hotelStar")String hotelStar,@Param("phoneNum")String phoneNum) </td>
        <td colspan="2">更新酒店信息</td>
    </tr>
    <tr>
        <td colspan="1">RoomMapper.updatePrice(@Param("id") int id,@Param("price") double price) </td>
        <td colspan="2">更新房间的价格</td>
    </tr>
    <tr>
        <td colspan="1">RoomMapper.updateNum(@Param("id") int id,@Param("total") Integer num) </td>
        <td colspan="2">更新房间的数量</td>
    </tr>
    <tr>
        <td colspan="1">RoomMapper.getRoomById(@Param("id")int id) </td>
        <td colspan="2">根据房间id查找房间</td>
    </tr>
    <tr>
        <td colspan="1">RoomMapper.deleteRoom(@Param("id") int id) </td>
        <td colspan="2">删除指定id的房间</td>
    </tr>
</table>

（4）业务逻辑层的动态模型

添加酒店

![](https://58467.oss-cn-shanghai.aliyuncs.com/%E5%9B%BE/%E9%9C%80%E6%B1%82%E8%A7%84%E6%A0%BC%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/%E6%B7%BB%E5%8A%A0%E9%85%92%E5%BA%97.png)

预定酒店修改客房信息

![](https://58467.oss-cn-shanghai.aliyuncs.com/%E5%9B%BE/%E9%9C%80%E6%B1%82%E8%A7%84%E6%A0%BC%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/%E9%A2%84%E8%AE%A2%E9%85%92%E5%BA%97%E4%BF%AE%E6%94%B9%E5%89%A9%E4%BD%99%E5%AE%A2%E6%88%BF%E4%BF%A1%E6%81%AF.png)

列表获取酒店信息

![](https://58467.oss-cn-shanghai.aliyuncs.com/%E5%9B%BE/%E9%9C%80%E6%B1%82%E8%A7%84%E6%A0%BC%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/%E5%88%97%E8%A1%A8%E8%8E%B7%E5%8F%96%E9%85%92%E5%BA%97%E4%BF%A1%E6%81%AF.png)

按地址和商圈搜索酒店

![](https://58467.oss-cn-shanghai.aliyuncs.com/%E5%9B%BE/%E9%9C%80%E6%B1%82%E8%A7%84%E6%A0%BC%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/%E6%8C%89%E5%9C%B0%E5%9D%80%E5%92%8C%E5%95%86%E5%9C%88%E6%90%9C%E7%B4%A2%E9%85%92%E5%BA%97.png)

按条件过滤酒店

![](https://58467.oss-cn-shanghai.aliyuncs.com/%E5%9B%BE/%E9%9C%80%E6%B1%82%E8%A7%84%E6%A0%BC%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/%E6%8C%89%E6%9D%A1%E4%BB%B6%E8%BF%87%E6%BB%A4%E9%85%92%E5%BA%97.png)

按价格排序酒店

![](https://58467.oss-cn-shanghai.aliyuncs.com/%E5%9B%BE/%E9%9C%80%E6%B1%82%E8%A7%84%E6%A0%BC%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/%E6%8C%89%E4%BB%B7%E6%A0%BC%E6%8E%92%E5%BA%8F%E9%85%92%E5%BA%97.png)

按评分排序酒店

![](https://58467.oss-cn-shanghai.aliyuncs.com/%E5%9B%BE/%E9%9C%80%E6%B1%82%E8%A7%84%E6%A0%BC%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/%E6%8C%89%E8%AF%84%E5%88%86%E6%8E%92%E5%BA%8F%E9%85%92%E5%BA%97.png)

获取某家酒店详细信息

![](https://58467.oss-cn-shanghai.aliyuncs.com/%E5%9B%BE/%E9%9C%80%E6%B1%82%E8%A7%84%E6%A0%BC%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/%E8%8E%B7%E5%8F%96%E6%9F%90%E5%AE%B6%E9%85%92%E5%BA%97%E7%9A%84%E8%AF%A6%E7%BB%86%E4%BF%A1%E6%81%AF.png)

查看酒店剩余某种房间数量

![](https://58467.oss-cn-shanghai.aliyuncs.com/%E5%9B%BE/%E9%9C%80%E6%B1%82%E8%A7%84%E6%A0%BC%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/%E6%9F%A5%E7%9C%8B%E9%85%92%E5%BA%97%E5%89%A9%E4%BD%99%E6%9F%90%E7%A7%8D%E6%88%BF%E9%97%B4%E6%95%B0%E9%87%8F.png)

查看酒店的所有订单

![](https://58467.oss-cn-shanghai.aliyuncs.com/%E5%9B%BE/%E9%9C%80%E6%B1%82%E8%A7%84%E6%A0%BC%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/%E6%9F%A5%E7%9C%8B%E9%85%92%E5%BA%97%E7%9A%84%E6%89%80%E6%9C%89%E8%AE%A2%E5%8D%95.png)

查看酒店管理人员的所有酒店

![](https://58467.oss-cn-shanghai.aliyuncs.com/%E5%9B%BE/%E9%9C%80%E6%B1%82%E8%A7%84%E6%A0%BC%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/%E6%9F%A5%E7%9C%8B%E9%85%92%E5%BA%97%E7%AE%A1%E7%90%86%E4%BA%BA%E5%91%98%E7%9A%84%E6%89%80%E6%9C%89%E9%85%92%E5%BA%97.png)

维护酒店信息

![](https://58467.oss-cn-shanghai.aliyuncs.com/%E5%9B%BE/%E9%9C%80%E6%B1%82%E8%A7%84%E6%A0%BC%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/%E7%BB%B4%E6%8A%A4%E9%85%92%E5%BA%97%E4%BF%A1%E6%81%AF.png)

（5）业务逻辑层的设计原理

利用委托式的风格，每个界面需要访问的业务逻辑由各自的控制器委托给不同领域的对象。



## 5. 依赖视角

下图分别是客户端和服务器端各自的包的依赖关系

![](https://lamada.oss-cn-beijing.aliyuncs.com/%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%BC%80%E5%8F%91%E5%8C%85%E5%9B%BE.png)

<center>客户端包图</center>
![](https://lamada.oss-cn-beijing.aliyuncs.com/%E6%9C%8D%E5%8A%A1%E7%AB%AF%E5%BC%80%E5%8F%91%E5%8C%85%E5%9B%BE.png)

<center>服务器端包图</center>
